<!doctype html>
<html lang="en">


  <head>
    <meta charset="UTF-8">
    <title>NM Air</title>


    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/go-debug.js"></script>
    <script type="text/javascript" src="js/moment.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/bootstrap-datetimepicker.min.js"></script>

    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/bootstrap-datetimepicker.min.css" />
    <link rel="stylesheet" href="css/nmair.css"/>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-animate.js"></script>
    <script src="js/nmair.js"></script>

    <!--link rel="stylesheet"
      href="/static/css/ticketing.css"-->
    <script>
      var app = angular.module('nma', ['ngAnimate']);
      
      app.controller('TripSelection', ['$scope', function($scope) {
            $scope.items = ['flight', 'seat', 'payment','ticket'];
            $scope.selection = $scope.items[1];
			$scope.seatLayout = 0;
            $scope.afterShow = function() {
  //            window.alert('Fully shown');
              initSeating();
              generateLayout($scope.seatLayout);
            }

            $scope.afterHide = function() {
   //           window.alert('Fully hidden');
            }
            }]);

       app.directive('myShow', function($animate) {
           return {
             scope: {
             'myShow': '=',
             'afterShow': '&',
             'afterHide': '&'
             },
       link: function(scope, element) {
             scope.$watch('myShow', function(show, oldShow) {
               if (!show) {
               $animate.removeClass(element, 'ng-hide').then(scope.afterShow);
               }
               if (show) {
               $animate.addClass(element, 'ng-hide').then(scope.afterHide);
               }
               });
             }
           }
         });
      
    function delayinit(v) {
      show = false;

      if ( v == 1 )
        show = true;

    };
    </script>

  </head>

  <body ng-app="nma">
    <div class="container" ng-controller="TripSelection">
      <div class="jumbotron container">
        <h1>NM Air</h1>
        <h2>Plan Your Trip Now</h2>
        <div id="switcher">
          <select ng-model="selection"
                  onchange="delayinit(this.value)" ng-options="item for item in items">
          </select>
        </div>
      </div> <!-- Jumbotron container -->
          <div class="animate-switch-container"
            ng-switch on="selection">
              <div class="animate-switch" ng-switch-when="flight">
                <div class="row">
                  <div class='col-sm-6 col-md-6'>
                    <div class="form-group">
                      <div class='input-group date' id='depicker'>
                        <input type='text' class="form-control" placeholder="Departure" />
                        <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                      </div>
                      <div class='input-group input-xxlg' id='airport1'>
                        <select class="form-control">
                          <option value="abq">ABQ (Albuquerque NM, Sunport)</option>
                          <option value="bos">BOS (Boston MA, Logan)</option>
                          <option value="ord">ORD (Chicago IL, O'Hare</option>
                          <option value="lax">LAX (Los Angeles CA, International)</option>
                        </select>
                      </div> <!-- airport1 -->
                    </div> <!-- form-group -->
                  </div> <!-- col-sm-6 col-md-6 -->
                  <div class='col-sm-6 col-md-6'>
                    <div class="form-group">
                      <div class='input-group date' id='repicker'>
                        <input type='text' class="form-control" placeholder="Return"/>
                        <span class="input-group-addon">
                          <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                      </div>
                      <div class='input-group input-xxlg' id='airport2'>
                        <select class="form-control">
                          <option value="abq">ABQ (Albuquerque NM, Sunport)</option>
                          <option value="bos">BOS (Boston MA, Logan)</option>
                          <option value="ord">ORD (Chicago IL, O'Hare</option>
                          <option value="lax">LAX (Los Angeles CA, International)</option>
                        </select>
                      </div> <!-- airport2 -->
                    </div> <!-- form-group -->
                  </div> <!-- col-sm-6 col-md-6 -->
                </div> <!-- row -->
              </div> <!-- flight selection -->
              <div class="animate-switch" ng-switch-when="seat"
                   my-show="show" after-show="afterShow()" after-hide="afterHide()">
               <div class="seating" id="seatingDiagram" style="background:#454545" ></div>
              </div>
              <div class="animate-switch" ng-switch-when="payment" style="color:white;">
                


<style>
	.ng-invalid.ng-dirty {
		border-color: red;
	}
	.ng-valid.ng-dirty {
		border-color: green;
	}
</style>

<div ng-controller="paymentController as paymentCtrl">
  <div class="row">
  <div class='col-sm-6 col-md-6'>
    <div class="form-group ">

	  <p>* Indicates Required</p>
	  <br>
		
		  <table>
			  <tr><td>Customer Information</td></tr>
			  <tr><td> Name *</td>
				  <td> <input id="payInfo" type="text" ng-model="paymentCtrl.custAddrInfo.name" required/> </td></tr>
			  <tr><td> Address 1 *</td>
				  <td> <input id="payInfo" type="text" ng-model="paymentCtrl.custAddrInfo.address1" required/> </td></tr>
			  <tr><td> Address 2 </td>
				  <td> <input id="payInfo" type="text" ng-model="paymentCtrl.custAddrInfo.address2" /> </td></tr>
			  <tr>
				  <td> City *</td>
				  <td> <input id="payInfo" type="text" ng-model="paymentCtrl.custAddrInfo.city" required/> </td></tr>
			  <tr><td> State *</td>
				  <td> <input id="payInfo" type="text" ng-model="paymentCtrl.custAddrInfo.state" required> </td></tr>
		 	  <tr><td> Zip *</td>
				  <td> <input id="payInfo" type="number" ng-model="paymentCtrl.custAddrInfo.zip" required/> </td></tr>
			  <tr><td> Country *</td>
				  <td> <select id="payInfo" ng-model="paymentCtrl.custAddrInfo.country" required>
						  <option>United States</option>
						  <option>Pandora</option>
					   </select> </td></tr>
			  <tr><td style="color: black"> . </td></tr>
			  
    </div> <!-- form-group -->
  </div> <!-- col-sm-6 col-md-6 -->
  <div class='col-sm-6 col-md-6'>
    <div class="form-group">
			  <tr><td>Payment Information</td></tr>
			  
			  <tr><td> Card Type *  </td>
				  <td> <select id="payInfo" ng-model="paymentCtrl.paymentInfo.cardType" required>
							  <option>Visa</option>
							  <option>MasterCard</option>
							  <option>Discover</option>
							  <option>American Express</option>
					   </select> </td></tr>
			  <tr><td> Name on Card * </td>
				  <td> <input id="payInfo" type="text" ng-model="paymentCtrl.paymentInfo.nameOnCard" required/> </td></tr>
			  <tr><td> Card Number * </td>
				  <td> <input id="payInfo" type="number" ng-model="paymentCtrl.paymentInfo.cardNumber" required/> </td></tr>
			  <tr><td> Expiration Date * </td>
				  <td> <input id="payInfo" type="month" ng-model="paymentCtrl.paymentInfo.expireDate" required/> </td></tr>
			  <tr><td> CVV * </td>
				  <td> <input id="payInfo" type="number" ng-model="paymentCtrl.paymentInfo.cvv" required/> </td></tr>
		  </table>
    </div> <!-- form-group -->
  </div> <!-- col-sm-6 col-md-6 -->
  <div class='col-sm-6 col-md-6'>
    <div class="form-group">
		  <br>
		  <input type="checkbox" ng-model="paymentCtrl.sameInfo" ng-change="paymentCtrl.sameAddress()"> Billing address same as customer address. <br>
		  <br>
		  <div ng-hide="paymentCtrl.sameInfo">
			  <table>
				  <tr><td> Billing Address</td></tr>
				  <tr><td> Address 1 *</td>
					  <td> <input id="payInfo" type="text" ng-model="paymentCtrl.billAddrInfo.address1" required/> </td></tr>
				  <tr><td> Address 2 </td>
					  <td> <input id="payInfo" type="text" ng-model="paymentCtrl.billAddrInfo.address2" /> </td></tr>
				  <tr><td> City *</td>
					  <td> <input id="payInfo" type="text" ng-model="paymentCtrl.billAddrInfo.city" required/> </td></tr>
				  <tr><td> State *</td>
					  <td> <input id="payInfo" type="text" ng-model="paymentCtrl.billAddrInfo.state" required> </td></tr>
				  <tr><td> Zip *</td>
					  <td> <input id="payInfo" type="number" ng-model="paymentCtrl.billAddrInfo.zip" required/> </td></tr>
				  <tr><td> Country *</td>
					  <td> <select id="payInfo" ng-model="paymentCtrl.billAddrInfo.country" required>
							  <option>United States</option>
							  <option>Pandora</option>
						   </select> </td></tr>
		 	  </table>
		  </div>
		  <br>
    </div> <!-- form-group -->
  </div> <!-- col-sm-6 col-md-6 -->
  <div class='col-sm-6 col-md-6'>
    <div class="form-group">
	  
	  <br>
     <table>
		  <tr><th>Card Type:</th><td>{{paymentCtrl.paymentInfo.cardType}}</td></tr>
		  <tr><th>Name on Card:</th><td>{{paymentCtrl.paymentInfo.nameOnCard}}</td></tr>
		  <tr><th>Card Number:</th><td>{{paymentCtrl.paymentInfo.cardNumber}}</td></tr>
		  <tr><th>Expiration Date:</th><td>{{paymentCtrl.paymentInfo.expireDate}}</td></tr>
		  <tr><th>CVV:</th><td>{{paymentCtrl.paymentInfo.cvv}}</td></tr>
		  <tr><th></th><td></td></tr>
		  <tr><th>Address 1:</th><td>{{paymentCtrl.custAddrInfo.address1}}</td></tr>
		  <tr><th>Address 2:</th><td>{{paymentCtrl.custAddrInfo.address2}}</td></tr>
		  <tr><th>City:</th><td>{{paymentCtrl.custAddrInfo.city}}</td></tr>
		  <tr><th>State:</th><td>{{paymentCtrl.custAddrInfo.state}}</td></tr>
		  <tr><th>Zip:</th><td>{{paymentCtrl.custAddrInfo.zip}}</td></tr>
		  <tr><th>Country:</th><td>{{paymentCtrl.custAddrInfo.country}}</td></tr>
    </table>
    </div> <!-- form-group -->
  </div> <!-- col-sm-6 col-md-6 -->
		  <input type="submit" value="Pay" style="float: right;"/> <br>
  </div> <!-- row -->
  
</div>
  

<script>
	app.controller("paymentController", function () {
		var paymentInfo = {
			cardType: "",
			nameOnCard: "",
			cardNumber: "",
			expireDate: "",
			cvv: ""
		};
		var billAddrInfo = {
			address1: "",
			address2: "",
			city: "",
			state: "",
			zip: "",
			country: ""
		};
		var custAddrInfo = {
			address1: "",
			address2: "",
			city: "",
			state: "",
			zip: "",
			country: ""
		};
		
		this.sameInfo = false;
		this.sameAddress = function () {
			this.billAddrInfo.address1 = this.custAddrInfo.address1;
			this.billAddrInfo.address2 = this.custAddrInfo.address2;
			this.billAddrInfo.city = this.custAddrInfo.city;
			this.billAddrInfo.state = this.custAddrInfo.state;
			this.billAddrInfo.zip = this.custAddrInfo.zip;
			this.billAddrInfo.country = this.custAddrInfo.country;
		};
	});
</script>


              </div>
          </div>

         <script>
            // new dependency: ngResource is included just above
            //        var nma = new angular.module("nma", ["ngResource"]);
  
            // inject the $resource dependency here
            //  nma.controller("TripSelection", ["$scope", "$resource", function($scope, $resource){
            // I designed the backend to play nicely with angularjs so this is all the
            // setup we need to do all of the ususal operations.
            //  var Ticket = $resource("/trip/:id", {id: '@id'}, {}); }
            //  }

            initSeating();
         </script>
         <script type="text/javascript" src="js/picker.js"></script>
 
    </div> <!-- container -->
  </body>
</html>

